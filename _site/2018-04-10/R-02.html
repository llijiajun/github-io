<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      “神抽”还是“鬼抽”?炉石发牌员偏好探究 &middot; Hades Jun
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/github-io/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/github-io/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/github-io/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/github-io/assets/apple-touch-icon.png">
  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/github-io/feed.xml" title="Hades Jun" />
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
</head>


  <body>
  <nav class="nav">
      <div class="nav-container">
        <a href="/github-io/">
          <h2 class="nav-title">Hades Jun</h2>
        </a>
        <ul>
          <li><a href="/github-io/about">About</a></li>
          <li><a href="/github-io/">Home</a></li>
        </ul>
      </div>
    </nav>

    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        冥郡
    

    
      <br>
      <span>on&nbsp;</span><time datetime="2018-04-10 00:00:00 +0800">April 10, 2018</time>
    
  </div>

  <h1 class="post-title">“神抽”还是“鬼抽”?炉石发牌员偏好探究</h1>

  <style type="text/css">
p.name {color:rgb(0,0,0);font:bold 16px arial;}
p.vs {color:rgb(248,0,142);font:bold 18px arial;}
p.tit {color:rgb(248,75,77);font:bold 17px arial;}
p.special {color:rgb(255,0,0);font:bold 19px arial;}
p.clusion{color:rgb(252,156,18);font:bold 17px arial;}
</style>

<h2 id="背景介绍">背景介绍</h2>

<h4 id="炉石传说是一款集换式卡牌游戏玩家根据自己现有的卡牌组建合适的卡组驱动随从施展法术与对手一决高下而作为一款卡牌游戏除了自身收藏卡牌之外取得胜负最为关键的一点在于关键时候是否能抽到关键的卡牌不少玩家吐槽炉石传说可能存在一个发牌员为了增加玩家的游戏时间对发牌机制做了控制以达到鬼抽神抽的目的而实际上炉石暗地里调整各种选牌概率也不是第一次了例如著名的竞技场11只剑龙骑术极大的降低了玩家的用户体验">《炉石传说》是一款集换式卡牌游戏，玩家根据自己现有的卡牌组建合适的卡组，驱动随从，施展法术，与对手一决高下。而作为一款卡牌游戏，除了自身收藏卡牌之外，取得胜负最为关键的一点在于，关键时候是否能抽到关键的卡牌。不少玩家吐槽炉石传说可能存在一个发牌员，为了增加玩家的游戏时间，对发牌机制做了控制，以达到鬼抽/神抽的目的。而实际上，炉石暗地里调整各种选牌概率也不是第一次了。例如：著名的竞技场11只剑龙骑术，极大的降低了玩家的用户体验。</h4>
<h4 id="笔者学习实验设计课程中便希望能利用上课知识为了验证网络上一直以来对发牌员偏好的猜测开始了简单的实验研究游戏动态过程过于复杂所以以起手发牌换牌为例完成一次简单的探究炉石中的起手发牌规律">笔者学习《实验设计》课程中，便希望能利用上课知识，为了验证网络上一直以来对发牌员偏好的猜测，开始了简单的实验。研究游戏动态过程过于复杂，所以以起手发牌换牌为例，完成一次简单的探究——炉石中的起手发牌规律。</h4>

<p><img src="/github-io/images/R02-2.jpg" alt="炉石游戏封面" /></p>

<h2 id="一实验设计">一、实验设计</h2>
<h3 id="1数据说明为了探究抽牌上手的因素将因变量确定为以下几类">1.数据说明，为了探究抽牌上手的因素，将因变量确定为以下几类:</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">名称</th>
      <th style="text-align: center">数据记作</th>
      <th style="text-align: center">备注</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">“上手卡牌顺序”</td>
      <td style="text-align: center">记为”次序”</td>
      <td style="text-align: center">标识每次实验中，抽到的卡牌</td>
    </tr>
    <tr>
      <td style="text-align: center">“法力水晶费用”</td>
      <td style="text-align: center">记为”费用”</td>
      <td style="text-align: center">取值为0-9+</td>
    </tr>
    <tr>
      <td style="text-align: center">“卡牌稀有度”</td>
      <td style="text-align: center">记为”稀有度”</td>
      <td style="text-align: center">取值为0-3，对应白卡/蓝卡/紫卡/橙卡(卡牌稀有度越高，越难收集，若暴雪公司需要盈利，迎合”人民币玩家”,稀有卡牌的上手率可能会高)</td>
    </tr>
    <tr>
      <td style="text-align: center">“是否为职业卡牌”</td>
      <td style="text-align: center">记为”职卡”</td>
      <td style="text-align: center">取值为0/1，1为是职业卡牌</td>
    </tr>
    <tr>
      <td style="text-align: center">“法术或随从”</td>
      <td style="text-align: center">记为”法随”</td>
      <td style="text-align: center">取值为0/1，1为随从牌，0为法术牌</td>
    </tr>
    <tr>
      <td style="text-align: center">“初始手牌或二次手牌”</td>
      <td style="text-align: center">记为”牌次”</td>
      <td style="text-align: center">取值为0/1，1为初始手牌，2为更换手牌后的手牌，这里是为了验证更换手牌是否能得到更好的结果。</td>
    </tr>
  </tbody>
</table>

<h3 id="2-实验总体说明炉石卡牌很多但每次游戏仅能携带30张卡牌所以为了方便实验构造了一个卡组尽量满足均匀设计进行实验实验卡牌说明如下">2. 实验总体说明，炉石卡牌很多，但每次游戏仅能携带30张卡牌，所以为了方便实验，构造了一个卡组尽量满足均匀设计，进行实验。实验卡牌说明如下：</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">变量</th>
      <th style="text-align: center">类型</th>
      <th style="text-align: center">30张卡牌中各类型张数</th>
      <th style="text-align: center">其他说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">费用</td>
      <td style="text-align: center">0-9</td>
      <td style="text-align: center">每个费用各三张</td>
      <td style="text-align: center">对战起始费用是1，每个回合能拥有的费用+1，上限是10</td>
    </tr>
    <tr>
      <td style="text-align: center">稀有度</td>
      <td style="text-align: center">白/蓝/紫/橙</td>
      <td style="text-align: center">8/8/7/7</td>
      <td style="text-align: center">因为橙卡比较难得到</td>
    </tr>
    <tr>
      <td style="text-align: center">职卡</td>
      <td style="text-align: center">职业/非职业</td>
      <td style="text-align: center">15/15</td>
      <td style="text-align: center">职业一般更强</td>
    </tr>
    <tr>
      <td style="text-align: center">法随</td>
      <td style="text-align: center">法术/随从</td>
      <td style="text-align: center">10/20</td>
      <td style="text-align: center">法术比较少，大部分是随从，所以比例定为1:2</td>
    </tr>
    <tr>
      <td style="text-align: center">牌次</td>
      <td style="text-align: center">首次/二次</td>
      <td style="text-align: center">1:1</td>
      <td style="text-align: center">每次将初始手牌更换，得到更换手牌数据</td>
    </tr>
  </tbody>
</table>

<h3 id="3-实验流程说明">3. 实验流程说明</h3>
<h4 id="1-利用构造好的实验卡组在2018年4月1日连续开始对局55局并认输仅测试起手抽牌">1. 利用构造好的实验卡组，在2018年4月1日，连续开始对局55局，并认输(仅测试起手抽牌)。</h4>
<h4 id="2-人工记录每次对局开始时上手的卡牌的详细情况为防止出现错记情况李某刘某两人同时开始记录并核对数据">2. 人工记录每次对局开始时，上手的卡牌的详细情况，为防止出现错记情况，李某、刘某两人同时开始记录，并核对数据。</h4>
<h4 id="3-测试时仅用一个炉石账号进行比较防止由于用户之间存在区别对待带来的差异">3. 测试时，仅用一个炉石账号进行比较，防止由于用户之间存在区别对待带来的差异。</h4>

<h2 id="二数据分析">二、数据分析</h2>
<h3 id="1描述统计">1.描述统计</h3>
<h4 id="实际游戏中起手换不换牌是一个博弈的过程而为了增加天胡的可能性如何换牌是一个值得探究的内容所以借着下面一副简单的直方图和概率密度图像验证一下心中的疑惑以及为发牌员的喜好因素做一个简单的探索">实际游戏中，起手换不换牌是一个博弈的过程，而为了增加“天胡”的可能性，如何换牌，是一个值得探究的内容，所以借着下面一副简单的直方图和概率密度图像，验证一下心中的疑惑，以及为“发牌员”的喜好因素做一个简单的探索。</h4>

<p><img src="/github-io/images/R02-3.png" alt="" /></p>
<center>
<p class="name">
图1. 不同轮次，不同因素上手次数图 

 左上记为图1.1,右上记为图1.2,左下记为图1.3,右下记为图1.4
</p>
</center>

<h5 id="a根据图11可以发现换不换牌存在区别换牌之后费用会稍高一些也就是说当起始手牌适中时希望搏一搏换更小的点数手牌时发牌员可能会给你更糟糕的牌但是不是整体上2次选牌费用会变高还需要进一步检验">a.根据图1.1可以发现，换不换牌存在区别，换牌之后费用会稍高一些，也就是说当起始手牌适中时，希望搏一搏，换更小的点数手牌时，“发牌员”可能会给你更糟糕的牌，但是不是整体上2次选牌费用会变高还需要进一步检验。</h5>
<h5 id="b根据图12发现本应该8877的概率分布图并不是心理预期的比例橙卡是否真的容易上手需要进一步检验但橙卡容易被抽到的确更能增加玩家的兴趣">b.根据图1.2发现，本应该8:8:7:7的概率分布图并不是心理预期的比例，“橙卡”是否真的容易“上手”，需要进一步检验，但橙卡容易被抽到，的确更能增加玩家的兴趣。</h5>
<h5 id="c根据图13换卡似乎更能将非职业卡换到手上但实际两者对比差别并不大也并不特别影响游戏的平衡发牌员是不是职业卡并不是很有兴趣">c.根据图1.3换卡似乎更能将非职业卡换到手上，但实际两者对比差别并不大，也并不特别影响游戏的平衡，“发牌员”是不是职业卡并不是很有兴趣</h5>
<h5 id="d卡组法术随从12但从图14手时法术随从37两者存在差别但发牌员是否对随从情有独钟仍需要进一步检验">d.卡组法术:随从=1:2,但从图1.4手时,法术:随从=3:7,两者存在差别,但发牌员是否对“随从”情有独钟,仍需要进一步检验。</h5>

<h3 id="2非参数检验">2.非参数检验</h3>

<p><script type="math/tex">\chi^2</script> 检验</p>

<p class="tit">
a.检验整体来说，上手的费用是不是均匀的
</p>
<p class="vs">
$$ H_0: 均匀 vs  H_1:  不均匀 $$
</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
## 	Chi-squared test for given probabilities
## 
## data:  table(dat$费用)
## X-squared = 2.7, df = 9, p-value = 0.975
</code></pre></div></div>

<p class="clusion">
没有足够把握认为能拒绝原假设，认为上手费用是均匀的
</p>

<p class="tit">
b.检验先后次序不同，是否对费用产生影响
</p>
<p class="vs">
$$ H_0 :先后费用频次来自同一总体 vs  H_1 :先后费用不来自一个总体 $$
</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
## 	Pearson's Chi-squared test
## 
## data:  first and second
## X-squared = 32.5, df = 25, p-value = 0.144
</code></pre></div></div>

<p class="clusion">
没有90%的把握认为先后次序会对费用产生影响，无法拒绝原假设
</p>

<p class="tit">
c.检验卡牌稀有度是否会影响上手概率
</p>
<p class="vs">
$$ H_0:卡牌稀有度不会影响上手概率 vs H_1:卡牌稀有度会影响上手概率 $$
</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
## 	Chi-squared test for given probabilities
## 
## data:  table(dat$稀有度)
## X-squared = 5.28, df = 3, p-value = 0.1524
</code></pre></div></div>

<p class="clusion">
没有90%的把握认为卡牌稀有度会影响上手概率，无法拒绝原假设
</p>

<p class="special">
binom检验
</p>

<p class="tit">
a.简单探究交互作用
    玩家通常还比较关注的一个点是，强力低费橙卡是否特别容易上手，所以对低费橙卡的上手率也做一个简单的检验
</p>
<p class="vs">
$$ H_0:低费橙卡上手概率 = \frac{1}{30} vs H_1:低费橙卡上手概率\neq\frac{1}{30} $$
</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
## 	Exact binomial test
## 
## data:  length(d[, 1]) and 200
## number of successes = 7, number of trials = 200, p-value = 0.8426
## alternative hypothesis: true probability of success is not equal to 0.03333333
## 95 percent confidence interval:
##  0.01418553 0.07078100
## sample estimates:
## probability of success 
##                  0.035
</code></pre></div></div>

<p class="clusion">
无法拒绝原假设，证明类似于“二王子贼”这样的强大“天胡”卡组，每次核心牌在手上的概率并没有被调整过，实际上，这与赌徒心态特别类似，少量的赢钱给了玩家每次都能赢钱的暗示，但实际上，这样一张橙卡起手就在手上的概率才3%，但低费将其拍出的概率则更高，这也就验证了每套卡组仅能带一张橙卡的合理性。
</p>

<p class="tit">
b.验证是否随从比法术更容易上手
</p>
<p class="vs">
$$H_0:随从上手率=\frac{1}{3} vs H_1:随从上手率\neq\frac{1}{3}$$
</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
## 	Exact binomial test
## 
## data:  sum(dat$法随) and 200
## number of successes = 140, number of trials = 200, p-value =
## 0.3305
## alternative hypothesis: true probability of success is not equal to 0.6666667
## 95 percent confidence interval:
##  0.6313501 0.7626104
## sample estimates:
## probability of success 
##                    0.7
</code></pre></div></div>

<p class="clusion">
无法拒绝原假设，认为随从和法术上手的几率是一样的。
</p>

<h5 id="尝试诸多检验之后沮丧的发现实际上整个实验都是与随机数做斗争并没有足够确切的证据显示网民所期待的那样炉石背后有位经验老道的发牌员">尝试诸多检验之后，沮丧的发现，实际上整个实验都是与随机数做斗争，并没有足够确切的证据显示，网民所期待的那样，“炉石”背后有位“经验老道”的发牌员。</h5>

<p><img src="/github-io/images/R02-1.jpg" alt="" /></p>

<h2 id="三结论">三、结论</h2>

<h5 id="1单纯从直方图概率密度图看费用与轮次是有一定关系的但仅在放宽犯错误的概率的情况下卡方检验能得到先后次序会影响上手费用但整体上看费用出现情况比较均匀也就是说对照详细频数发牌员趋向于给玩家更不好的卡07费实际上是玩家不太希望第一轮上手的卡而12费则是玩家最希望上手的卡根据直方图第二轮派牌策略实际上更趋向于给不太好的卡这是单纯用检验没有办法得到的">1.单纯从直方图、概率密度图看，费用与轮次是有一定关系的，但仅在放宽犯错误的概率的情况下，卡方检验能得到先后次序会影响上手费用，但整体上看费用出现情况比较均匀，也就是说，对照详细频数，“发牌员”趋向于给玩家更不好的卡，0、7+费实际上是玩家不太希望第一轮上手的卡，而1、2费则是玩家最希望上手的卡，根据直方图，第二轮派牌策略实际上更趋向于给不太好的卡，这是单纯用检验没有办法得到的。</h5>
<h5 id="2从多个检验的失效看出也许炉石背后并没有网络上谣传的发牌员而发牌时所遵循的策略仅仅是生成一系列来自均匀分布的随机数罢了但毫无疑问在暴雪承认暗改竞技场选牌机制之后改动抽牌概率也是极有可能的当前在实验中发现仅有选牌轮次可能存在差异可以提醒玩家尽量不要怀有搏一搏的心态">2.从多个检验的失效看出，也许“炉石”背后并没有网络上谣传的“发牌员”，而发牌时所遵循的策略仅仅是生成一系列来自均匀分布的随机数罢了。但毫无疑问，在暴雪承认暗改竞技场选牌机制之后，改动抽牌概率也是极有可能的，当前在实验中发现仅有选牌轮次可能存在差异，可以提醒玩家尽量不要怀有“搏一搏”的心态</h5>

<h2 id="四不足与局限">四、不足与局限</h2>

<h5 id="1由于本人卡牌有限无法更好的排列出更多的实验模型还有潜在的一些选牌因素无法得到验证例如为了增加玩家对新版本的熟悉度是否选牌与卡牌版本有关之前有过的概率调整是将新版本卡牌在竞技场中的被选率提高">1.由于本人卡牌有限，无法更好的排列出更多的实验模型，还有潜在的一些选牌因素无法得到验证，例如：为了增加玩家对新版本的熟悉度，是否选牌与卡牌版本有关(之前有过的概率调整是将新版本卡牌在竞技场中的被选率提高)</h5>
<h5 id="2无法消除由个人账号带来的影响本人非人民币玩家可能并不在炉石希望改善用户体验的范畴之内所以可能没有被暗中改动">2.无法消除由个人账号带来的影响，本人非人民币玩家，可能并不在炉石希望改善用户体验的范畴之内，所以可能没有被暗中改动</h5>
<h5 id="3比较难研究交叉项带来的影响由于法术牌最高也就到7费而大部分高费牌卡牌稀有度比较高这样研究交互项时无法排除各因素之间的联系所以仅能对单独的一些感兴趣的交互项做研究">3.比较难研究交叉项带来的影响，由于法术牌最高也就到7费，而大部分高费牌卡牌稀有度比较高，这样研究交互项时，无法排除各因素之间的联系，所以仅能对单独的一些感兴趣的交互项做研究</h5>
<h4 id="4炉石最吸引玩家的其实是卡牌开包机制的研究但由于每天能靠任务赚得的包是有限的所以无法得到大量数据探究开包出橙率与时间开包姿势开包玩家是否是连续开包等等更为有趣的因素所以目前仍有很大的探索空间">4.炉石最吸引玩家的其实是卡牌开包机制的研究，但由于每天能靠任务赚得的包是有限的，所以无法得到大量数据，探究“开包出橙率”与“时间”、“开包姿势”、“开包玩家”、“是否是连续开包”等等更为有趣的因素。所以目前仍有很大的探索空间。</h4>

<h2 id="五参考文献">五、参考文献</h2>

<h5 id="1我来决定你的牌运-炉石发牌员现身说法httplsduowancom1606328720305017html">1.我来决定你的牌运 炉石发牌员现身说法(http://ls.duowan.com/1606/328720305017.html)</h5>
<h5 id="2第六篇r语言数据可视化之数据分布图直方图密度曲线箱线图等高线2d密度图httpswwwcnblogscommuchenp5430536html">2.第六篇：R语言数据可视化之数据分布图（直方图、密度曲线、箱线图、等高线、2D密度图）(https://www.cnblogs.com/muchen/p/5430536.html)</h5>
<h5 id="3神抽or鬼抽-炉石中的发牌员真的存在吗httpgamessinacomcnozhs2016-05-23fxsktkp9166036shtml">3.神抽or鬼抽 炉石中的发牌员真的存在吗？(http://games.sina.com.cn/o/z/hs/2016-05-23/fxsktkp9166036.shtml)</h5>

<h2 id="六附录代码">六、附录代码</h2>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat</span><span class="o">&lt;-</span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"01.csv"</span><span class="p">,</span><span class="n">head</span><span class="o">=</span><span class="nb">T</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span><span class="w">
</span><span class="c1">###画图</span><span class="w">
</span><span class="n">dat</span><span class="o">$</span><span class="err">轮次</span><span class="o">&lt;-</span><span class="n">as.factor</span><span class="p">(</span><span class="n">dat</span><span class="o">$</span><span class="err">轮次</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">easyGgplot2</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="m">1</span><span class="o">&lt;-</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="err">费用</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="err">轮次</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">..density..</span><span class="p">),</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="m">0.5</span><span class="p">,</span><span class="n">colour</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span><span class="n">binwidth</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">stat_density</span><span class="p">(</span><span class="n">geom</span><span class="o">=</span><span class="s2">"line"</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s2">"identity"</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="m">1.5</span><span class="p">,</span><span class="n">aes</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="err">轮次</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"费用"</span><span class="p">)</span><span class="o">+</span><span class="n">ylab</span><span class="p">(</span><span class="s2">"density"</span><span class="p">)</span><span class="o">+</span><span class="n">guides</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="o">+</span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"轮次"</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="m">2</span><span class="o">&lt;-</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="err">稀有度</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="err">轮次</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">..density..</span><span class="p">),</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="m">0.5</span><span class="p">,</span><span class="n">colour</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span><span class="n">binwidth</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">stat_density</span><span class="p">(</span><span class="n">geom</span><span class="o">=</span><span class="s2">"line"</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="m">1.5</span><span class="p">,</span><span class="n">aes</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="err">轮次</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"稀有度"</span><span class="p">)</span><span class="o">+</span><span class="n">ylab</span><span class="p">(</span><span class="s2">"density"</span><span class="p">)</span><span class="o">+</span><span class="n">guides</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="o">+</span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"轮次"</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="m">3</span><span class="o">&lt;-</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">factor</span><span class="p">(</span><span class="err">职卡</span><span class="p">),</span><span class="n">fill</span><span class="o">=</span><span class="err">轮次</span><span class="p">))</span><span class="o">+</span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">stat</span><span class="o">=</span><span class="s2">"count"</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"是否是职业卡"</span><span class="p">)</span><span class="o">+</span><span class="n">ylab</span><span class="p">(</span><span class="s2">"频率"</span><span class="p">)</span><span class="o">+</span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"轮次"</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="m">4</span><span class="o">&lt;-</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">factor</span><span class="p">(</span><span class="err">法随</span><span class="p">),</span><span class="n">fill</span><span class="o">=</span><span class="err">轮次</span><span class="p">))</span><span class="o">+</span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">stat</span><span class="o">=</span><span class="s2">"count"</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"是法术或随从"</span><span class="p">)</span><span class="o">+</span><span class="n">ylab</span><span class="p">(</span><span class="s2">"频率"</span><span class="p">)</span><span class="o">+</span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"轮次"</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot2.multiplot</span><span class="p">(</span><span class="n">p</span><span class="m">1</span><span class="p">,</span><span class="n">p</span><span class="m">2</span><span class="p">,</span><span class="n">p</span><span class="m">3</span><span class="p">,</span><span class="n">p</span><span class="m">4</span><span class="p">,</span><span class="n">cols</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="c1">###各种检验</span><span class="w">
</span><span class="n">test</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">dat</span><span class="o">$</span><span class="err">稀有度</span><span class="p">))</span><span class="w">
</span><span class="n">real</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">7</span><span class="p">)</span><span class="o">*</span><span class="m">200</span><span class="o">/</span><span class="m">30</span><span class="w">
</span><span class="n">testdat</span><span class="o">&lt;-</span><span class="n">matrix</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="n">real</span><span class="p">),</span><span class="n">byrow</span><span class="o">=</span><span class="nb">F</span><span class="p">,,</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="n">chisq.test</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span><span class="w">
</span><span class="n">test</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">dat</span><span class="o">$</span><span class="err">费用</span><span class="p">))</span><span class="w">
</span><span class="n">real</span><span class="o">&lt;-</span><span class="nf">rep</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">10</span><span class="p">)</span><span class="o">*</span><span class="m">20</span><span class="w">
</span><span class="n">testdat</span><span class="o">&lt;-</span><span class="n">matrix</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="n">real</span><span class="p">),</span><span class="n">byrow</span><span class="o">=</span><span class="nb">T</span><span class="p">,</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="n">chisq.test</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span><span class="w">
</span><span class="n">first</span><span class="o">&lt;-</span><span class="n">table</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span><span class="o">$</span><span class="err">轮次</span><span class="o">==</span><span class="m">1</span><span class="p">,]</span><span class="o">$</span><span class="err">费用</span><span class="p">)</span><span class="w">
</span><span class="n">second</span><span class="o">&lt;-</span><span class="n">table</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span><span class="o">$</span><span class="err">轮次</span><span class="o">==</span><span class="m">2</span><span class="p">,]</span><span class="o">$</span><span class="err">费用</span><span class="p">)</span><span class="w">
</span><span class="n">chisq.test</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="n">second</span><span class="p">)</span><span class="w">
</span><span class="n">d</span><span class="o">&lt;-</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span><span class="o">$</span><span class="err">稀有度</span><span class="o">==</span><span class="m">3</span><span class="p">,]</span><span class="w">
</span><span class="n">d</span><span class="o">&lt;-</span><span class="n">d</span><span class="p">[</span><span class="n">d</span><span class="o">$</span><span class="err">费用</span><span class="o">&lt;</span><span class="m">3</span><span class="p">,]</span><span class="w">
</span><span class="n">binom.test</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">d</span><span class="p">[,</span><span class="m">1</span><span class="p">]),</span><span class="m">200</span><span class="p">,</span><span class="m">1</span><span class="o">/</span><span class="m">30</span><span class="p">)</span><span class="w">
</span><span class="n">binom.test</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">dat</span><span class="o">$</span><span class="err">法随</span><span class="p">),</span><span class="m">200</span><span class="p">,</span><span class="m">2</span><span class="o">/</span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="n">chisq.test</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">table</span><span class="p">(</span><span class="n">dat</span><span class="o">$</span><span class="err">费用</span><span class="p">))</span><span class="w">
</span><span class="n">xx</span><span class="o">&lt;-</span><span class="n">table</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span><span class="o">$</span><span class="err">轮次</span><span class="o">==</span><span class="m">1</span><span class="p">,]</span><span class="o">$</span><span class="err">费用</span><span class="p">)</span><span class="w">
</span><span class="n">yy</span><span class="o">&lt;-</span><span class="n">table</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span><span class="o">$</span><span class="err">轮次</span><span class="o">==</span><span class="m">2</span><span class="p">,]</span><span class="o">$</span><span class="err">费用</span><span class="p">)</span><span class="w">
</span><span class="c1">###观察详情</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">9</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">seq</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="m">16</span><span class="p">,</span><span class="m">6</span><span class="o">/</span><span class="m">5</span><span class="p">),</span><span class="n">type</span><span class="o">=</span><span class="s2">"n"</span><span class="p">)</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span><span class="n">type</span><span class="o">=</span><span class="s2">"l"</span><span class="p">,</span><span class="n">col</span><span class="o">=</span><span class="s2">"black"</span><span class="p">)</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span><span class="n">type</span><span class="o">=</span><span class="s2">"l"</span><span class="p">,</span><span class="n">col</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">)</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="m">10</span><span class="p">),</span><span class="n">type</span><span class="o">=</span><span class="s2">"l"</span><span class="p">,</span><span class="n">col</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">xx</span><span class="o">-</span><span class="n">yy</span><span class="p">,</span><span class="n">type</span><span class="o">=</span><span class="s2">"l"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>


</div>

<div class="pagination">
  
    <a href="/github-io/2018-05-15/Poem-01" class="left arrow">&#8592;</a>
  
  
    <a href="/github-io/2018-03-12/R-01" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>

<div id="container"> </div>

<script src="/github-io/dist/gitment.browser.js"></script>
<script>
    var clientId = 'e11f5919eb25fa0a374a'
    var clientSecret = 'd2d7da0ab1a43f5143041729154cbe53030005fb'
    var gitment = new Gitment({
      id: 'Hades Jun',
      owner: 'llijiajun',
      repo: 'https://github.com/llijiajun/commet.git',
      oauth: {
        client_id: clientId,
        client_secret: clientSecret,
      },
    })
gitment.render('container')
</script>
    </main>

    <footer>
      <span>
        &copy; <time datetime="2018-12-31 14:04:21 +0800">2018</time> . Made with HadesJun.
      </span>
    </footer>
  </body>
</html>
