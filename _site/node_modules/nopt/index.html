<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <!-- Favicon code from realfavicongenerator.net -->
<link rel="apple-touch-icon" sizes="180x180" href="/github-io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/github-io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/github-io/favicon-16x16.png">
<link rel="manifest" href="/github-io/site.webmanifest">
<link rel="mask-icon" href="/github-io/safari-pinned-tab.svg" color="#8b51a3">
<meta name="msapplication-TileColor" content="#563d7c">
<meta name="theme-color" content="#ffffff">

  <!--jQuery-->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!-- Fonts & Icons -->
  <!--link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"-->
  <!--link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'-->

  <!-- CSS -->
  <link rel="stylesheet" href="/github-io/assets/css/main.css">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Homepage of Jiajun Li | Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Homepage of Jiajun Li" />
<meta name="author" content="Jiajun Li" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/github-io/node_modules/nopt/" />
<meta property="og:url" content="http://localhost:4000/github-io/node_modules/nopt/" />
<meta property="og:site_name" content="Homepage of Jiajun Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Homepage of Jiajun Li" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Jiajun Li"},"description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Homepage of Jiajun Li","url":"http://localhost:4000/github-io/node_modules/nopt/"}</script>
<!-- End Jekyll SEO tag -->

</head>
  <!--jQuery-->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <body>
  <!--nav class="nav">
      <div class="nav-container">
        <a href="/github-io/">
          <h2 class="nav-title">Homepage of Jiajun Li</h2>
        </a>
        <ul>
          <li><a href="/github-io/about">About</a></li>
          <li><a href="/github-io/">Home</a></li>
        </ul>
      </div>
    </nav-->

    <div class="container">
    

<section id="header-nav">
  <header>
    <nav>
      <ul>
        
        
        <!-- others -->
        <a href="/github-io/">
          <li class="btn-nav">Home</li>
        </a>
        
          <a href="/github-io/publications.html">
            <li class="btn-nav">Publications</li>
          </a>
        
        
        
          <a href="/github-io/blog.html">
            <li class="current btn-nav">Blog</li>
          </a>
          <a href="/github-io/tags.html">
            <li class="btn-nav">Tags</li>
          </a>
        
        
      </ul>
    </nav>
  </header>
</section>
<p>If you want to write an option parser, and have it be good, there are
two ways to do it.  The Right Way, and the Wrong Way.</p>

<p>The Wrong Way is to sit down and write an option parser.  We’ve all done
that.</p>

<p>The Right Way is to write some complex configurable program with so many
options that you go half-insane just trying to manage them all, and put
it off with duct-tape solutions until you see exactly to the core of the
problem, and finally snap and write an awesome option parser.</p>

<p>If you want to write an option parser, don’t write an option parser.
Write a package manager, or a source control system, or a service
restarter, or an operating system.  You probably won’t end up with a
good one of those, but if you don’t give up, and you are relentless and
diligent enough in your procrastination, you may just end up with a very
nice option parser.</p>

<h2 id="usage">USAGE</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// my-program.js
var nopt = require("nopt")
  , Stream = require("stream").Stream
  , path = require("path")
  , knownOpts = { "foo" : [String, null]
                , "bar" : [Stream, Number]
                , "baz" : path
                , "bloo" : [ "big", "medium", "small" ]
                , "flag" : Boolean
                , "pick" : Boolean
                , "many" : [String, Array]
                }
  , shortHands = { "foofoo" : ["--foo", "Mr. Foo"]
                 , "b7" : ["--bar", "7"]
                 , "m" : ["--bloo", "medium"]
                 , "p" : ["--pick"]
                 , "f" : ["--flag"]
                 }
             // everything is optional.
             // knownOpts and shorthands default to {}
             // arg list defaults to process.argv
             // slice defaults to 2
  , parsed = nopt(knownOpts, shortHands, process.argv, 2)
console.log(parsed)
</code></pre></div></div>

<p>This would give you support for any of the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>node my-program.js <span class="nt">--foo</span> <span class="s2">"blerp"</span> <span class="nt">--no-flag</span>
<span class="o">{</span> <span class="s2">"foo"</span> : <span class="s2">"blerp"</span>, <span class="s2">"flag"</span> : <span class="nb">false</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">---bar</span> 7 <span class="nt">--foo</span> <span class="s2">"Mr. Hand"</span> <span class="nt">--flag</span>
<span class="o">{</span> bar: 7, foo: <span class="s2">"Mr. Hand"</span>, flag: <span class="nb">true</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--foo</span> <span class="s2">"blerp"</span> <span class="nt">-f</span> <span class="nt">-----p</span>
<span class="o">{</span> foo: <span class="s2">"blerp"</span>, flag: <span class="nb">true</span>, pick: <span class="nb">true</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">-fp</span> <span class="nt">--foofoo</span>
<span class="o">{</span> foo: <span class="s2">"Mr. Foo"</span>, flag: <span class="nb">true</span>, pick: <span class="nb">true</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--foofoo</span> <span class="nt">--</span> <span class="nt">-fp</span>  <span class="c"># -- stops the flag parsing.</span>
<span class="o">{</span> foo: <span class="s2">"Mr. Foo"</span>, argv: <span class="o">{</span> remain: <span class="o">[</span><span class="s2">"-fp"</span><span class="o">]</span> <span class="o">}</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--blatzk</span> 1000 <span class="nt">-fp</span> <span class="c"># unknown opts are ok.</span>
<span class="o">{</span> blatzk: 1000, flag: <span class="nb">true</span>, pick: <span class="nb">true</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--blatzk</span> <span class="nb">true</span> <span class="nt">-fp</span> <span class="c"># but they need a value</span>
<span class="o">{</span> blatzk: <span class="nb">true</span>, flag: <span class="nb">true</span>, pick: <span class="nb">true</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--no-blatzk</span> <span class="nt">-fp</span> <span class="c"># unless they start with "no-"</span>
<span class="o">{</span> blatzk: <span class="nb">false</span>, flag: <span class="nb">true</span>, pick: <span class="nb">true</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--baz</span> b/a/z <span class="c"># known paths are resolved.</span>
<span class="o">{</span> baz: <span class="s2">"/Users/isaacs/b/a/z"</span> <span class="o">}</span>

<span class="c"># if Array is one of the types, then it can take many</span>
<span class="c"># values, and will always be an array.  The other types provided</span>
<span class="c"># specify what types are allowed in the list.</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--many</span> 1 <span class="nt">--many</span> null <span class="nt">--many</span> foo
<span class="o">{</span> many: <span class="o">[</span><span class="s2">"1"</span>, <span class="s2">"null"</span>, <span class="s2">"foo"</span><span class="o">]</span> <span class="o">}</span>

<span class="nv">$ </span>node my-program.js <span class="nt">--many</span> foo
<span class="o">{</span> many: <span class="o">[</span><span class="s2">"foo"</span><span class="o">]</span> <span class="o">}</span>
</code></pre></div></div>

<p>Read the tests at the bottom of <code class="language-plaintext highlighter-rouge">lib/nopt.js</code> for more examples of
what this puppy can do.</p>

<h2 id="types">Types</h2>

<p>The following types are supported, and defined on <code class="language-plaintext highlighter-rouge">nopt.typeDefs</code></p>

<ul>
  <li>String: A normal string.  No parsing is done.</li>
  <li>path: A file system path.  Gets resolved against cwd if not absolute.</li>
  <li>url: A url.  If it doesn’t parse, it isn’t accepted.</li>
  <li>Number: Must be numeric.</li>
  <li>Date: Must parse as a date. If it does, and <code class="language-plaintext highlighter-rouge">Date</code> is one of the options,
then it will return a Date object, not a string.</li>
  <li>Boolean: Must be either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>.  If an option is a boolean,
then it does not need a value, and its presence will imply <code class="language-plaintext highlighter-rouge">true</code> as
the value.  To negate boolean flags, do <code class="language-plaintext highlighter-rouge">--no-whatever</code> or <code class="language-plaintext highlighter-rouge">--whatever
false</code></li>
  <li>NaN: Means that the option is strictly not allowed.  Any value will
fail.</li>
  <li>Stream: An object matching the “Stream” class in node.  Valuable
for use when validating programmatically.  (npm uses this to let you
supply any WriteStream on the <code class="language-plaintext highlighter-rouge">outfd</code> and <code class="language-plaintext highlighter-rouge">logfd</code> config options.)</li>
  <li>Array: If <code class="language-plaintext highlighter-rouge">Array</code> is specified as one of the types, then the value
will be parsed as a list of options.  This means that multiple values
can be specified, and that the value will always be an array.</li>
</ul>

<p>If a type is an array of values not on this list, then those are
considered valid values.  For instance, in the example above, the
<code class="language-plaintext highlighter-rouge">--bloo</code> option can only be one of <code class="language-plaintext highlighter-rouge">"big"</code>, <code class="language-plaintext highlighter-rouge">"medium"</code>, or <code class="language-plaintext highlighter-rouge">"small"</code>,
and any other value will be rejected.</p>

<p>When parsing unknown fields, <code class="language-plaintext highlighter-rouge">"true"</code>, <code class="language-plaintext highlighter-rouge">"false"</code>, and <code class="language-plaintext highlighter-rouge">"null"</code> will be
interpreted as their JavaScript equivalents, and numeric values will be
interpreted as a number.</p>

<p>You can also mix types and values, or multiple types, in a list.  For
instance <code class="language-plaintext highlighter-rouge">{ blah: [Number, null] }</code> would allow a value to be set to
either a Number or null.  When types are ordered, this implies a
preference, and the first type that can be used to properly interpret
the value will be used.</p>

<p>To define a new type, add it to <code class="language-plaintext highlighter-rouge">nopt.typeDefs</code>.  Each item in that
hash is an object with a <code class="language-plaintext highlighter-rouge">type</code> member and a <code class="language-plaintext highlighter-rouge">validate</code> method.  The
<code class="language-plaintext highlighter-rouge">type</code> member is an object that matches what goes in the type list.  The
<code class="language-plaintext highlighter-rouge">validate</code> method is a function that gets called with <code class="language-plaintext highlighter-rouge">validate(data,
key, val)</code>.  Validate methods should assign <code class="language-plaintext highlighter-rouge">data[key]</code> to the valid
value of <code class="language-plaintext highlighter-rouge">val</code> if it can be handled properly, or return boolean
<code class="language-plaintext highlighter-rouge">false</code> if it cannot.</p>

<p>You can also call <code class="language-plaintext highlighter-rouge">nopt.clean(data, types, typeDefs)</code> to clean up a
config object and remove its invalid properties.</p>

<h2 id="error-handling">Error Handling</h2>

<p>By default, nopt outputs a warning to standard error when invalid
options are found.  You can change this behavior by assigning a method
to <code class="language-plaintext highlighter-rouge">nopt.invalidHandler</code>.  This method will be called with
the offending <code class="language-plaintext highlighter-rouge">nopt.invalidHandler(key, val, types)</code>.</p>

<p>If no <code class="language-plaintext highlighter-rouge">nopt.invalidHandler</code> is assigned, then it will console.error
its whining.  If it is assigned to boolean <code class="language-plaintext highlighter-rouge">false</code> then the warning is
suppressed.</p>

<h2 id="abbreviations">Abbreviations</h2>

<p>Yes, they are supported.  If you define options like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="dl">"</span><span class="s2">foolhardyelephants</span><span class="dl">"</span> <span class="p">:</span> <span class="nb">Boolean</span>
<span class="p">,</span> <span class="dl">"</span><span class="s2">pileofmonkeys</span><span class="dl">"</span> <span class="p">:</span> <span class="nb">Boolean</span> <span class="p">}</span>
</code></pre></div></div>

<p>Then this will work:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node program.js <span class="nt">--foolhar</span> <span class="nt">--pil</span>
node program.js <span class="nt">--no-f</span> <span class="nt">--pileofmon</span>
<span class="c"># etc.</span>
</code></pre></div></div>

<h2 id="shorthands">Shorthands</h2>

<p>Shorthands are a hash of shorter option names to a snippet of args that
they expand to.</p>

<p>If multiple one-character shorthands are all combined, and the
combination does not unambiguously match any other option or shorthand,
then they will be broken up into their constituent parts.  For example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nl">"s"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"--loglevel"</span><span class="p">,</span><span class="w"> </span><span class="s2">"silent"</span><span class="p">]</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="nl">"g"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"--global"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="nl">"f"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"--force"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="nl">"p"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"--parseable"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="nl">"l"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"--long"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">ls</span> <span class="nt">-sgflp</span>
<span class="c"># just like doing this:</span>
npm <span class="nb">ls</span> <span class="nt">--loglevel</span> silent <span class="nt">--global</span> <span class="nt">--force</span> <span class="nt">--long</span> <span class="nt">--parseable</span>
</code></pre></div></div>

<h2 id="the-rest-of-the-args">The Rest of the args</h2>

<p>The config object returned by nopt is given a special member called
<code class="language-plaintext highlighter-rouge">argv</code>, which is an object with the following fields:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">remain</code>: The remaining args after all the parsing has occurred.</li>
  <li><code class="language-plaintext highlighter-rouge">original</code>: The args as they originally appeared.</li>
  <li><code class="language-plaintext highlighter-rouge">cooked</code>: The args after flags and shorthands are expanded.</li>
</ul>

<h2 id="slicing">Slicing</h2>

<p>Node programs are called with more or less the exact argv as it appears
in C land, after the v8 and node-specific options have been plucked off.
As such, <code class="language-plaintext highlighter-rouge">argv[0]</code> is always <code class="language-plaintext highlighter-rouge">node</code> and <code class="language-plaintext highlighter-rouge">argv[1]</code> is always the
JavaScript program being run.</p>

<p>That’s usually not very useful to you.  So they’re sliced off by
default.  If you want them, then you can pass in <code class="language-plaintext highlighter-rouge">0</code> as the last
argument, or any other number that you’d like to slice off the start of
the list.</p>


<!-- Footer
<footer>
  <div class="footer">
    Copyright © 2024
    <a href=""></a>.
    Powered by Jekyll with
    <a href="https://github.com/chrjabs/Grape-Academic-Theme">Grape Academic Theme</a>.
  </div>
</footer>
 -->
    </div>

    <footer>
      <span>
        &copy; <time datetime="2024-07-19 16:14:32 +0800">2024</time> . Made by Jiajun Li.
      </span>
    </footer>
  </body>
</html>
